# Tickets & Events Cards - Complete Guide

This integration includes three custom Lovelace cards for displaying events:

## 1. Basic Events Card

The standard card for displaying events in a list view.

### Installation
```yaml
# Add resource
url: /hacsfiles/tickets_events/tickets-events-card.js
type: module
```

### Usage
```yaml
type: custom:tickets-events-card
entity: sensor.tickets_events_today
title: "Today's Events"
max_events: 5
show_images: true
show_rating: true
show_price: true
```

---

## 2. Enhanced Events Card (with Detail Modal)

An enhanced version with a detail modal showing map, description, QR code, and booking button.

### Installation
```yaml
# Add resource
url: /hacsfiles/tickets_events/tickets-events-card-enhanced.js
type: module
```

### Usage
```yaml
type: custom:tickets-events-card-enhanced
entity: sensor.tickets_events_today
title: "Today's Events in Bucharest"
max_events: 5
show_images: true
show_rating: true
show_price: true
```

### Features
- âœ… Click "View Details" to open modal
- ğŸ—ºï¸ Interactive map showing event location
- ğŸ“ Full event description
- ğŸ“± QR code for easy mobile booking
- ğŸ« Direct "Book Now" button
- ğŸ’° Price and availability information
- â­ Ratings and reviews
- ğŸ“… Available dates display

### Detail Modal Includes:
1. **Location Map**: Interactive Leaflet map with event marker
2. **Full Description**: Complete event information
3. **Booking Details**: Price, currency, available dates
4. **QR Code**: Scan to book on mobile devices
5. **Book Button**: One-click booking

---

## 3. Events Map Card

Shows all events on an interactive map with markers and popups.

### Installation
```yaml
# Add resource
url: /hacsfiles/tickets_events/tickets-events-map.js
type: module
```

### Usage
```yaml
type: custom:tickets-events-map
entity: sensor.tickets_events_today
title: "Events Map"
height: 500px
zoom: 12
```

### Configuration Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `entity` | string | **Required** | Entity ID (e.g., `sensor.tickets_events_today`) |
| `title` | string | "Events Map" | Card title |
| `height` | string | "400px" | Map height (e.g., "500px", "60vh") |
| `zoom` | number | 12 | Default map zoom level (1-20) |

### Features
- ğŸ—ºï¸ Interactive OpenStreetMap
- ğŸ“ Color-coded markers by event type
- ğŸ’¬ Click markers to see event details
- ğŸ« Direct booking links in popups
- ğŸ¨ Automatic map centering and bounds
- ğŸ·ï¸ Visual legend for event types

### Marker Colors
- ğŸ”µ **Blue**: Tours
- ğŸŸ£ **Purple**: Museums
- ğŸ”´ **Pink**: Concerts
- ğŸŸ  **Orange**: Attractions
- ğŸŸ¢ **Green**: Food Tours

---

## Complete Dashboard Example

Here's a complete dashboard layout using all three cards:

```yaml
views:
  - title: Events
    cards:
      # Map view - see all events geographically
      - type: custom:tickets-events-map
        entity: sensor.tickets_events_today
        title: "Events in Your Area"
        height: 400px
        zoom: 13

      # Enhanced card with detail modal
      - type: custom:tickets-events-card-enhanced
        entity: sensor.tickets_events_today
        title: "Today's Events"
        max_events: 5
        show_images: true
        show_rating: true
        show_price: true

      # Nearby events
      - type: custom:tickets-events-card-enhanced
        entity: sensor.tickets_events_nearby
        title: "Nearby Attractions"
        max_events: 3

      # Calendar view
      - type: calendar
        entities:
          - calendar.tickets_events_events_calendar
        initial_view: dayGridMonth
```

---

## Map Requirements

Both the **Enhanced Card** and **Map Card** require the Leaflet library for maps. The cards automatically load Leaflet from CDN, but you can also add it manually:

```yaml
# Optional: Add to your Lovelace resources
url: https://unpkg.com/leaflet@1.9.4/dist/leaflet.js
type: module
```

---

## Troubleshooting

### Maps not showing
1. Ensure events have `latitude` and `longitude` data
2. Check browser console for Leaflet errors
3. Verify internet connection (maps load from OpenStreetMap)

### Cards not appearing
1. Clear browser cache (Ctrl+F5 / Cmd+Shift+R)
2. Verify resource URLs are correct
3. Check entity exists and has data:
   ```yaml
   Developer Tools â†’ States â†’ search for your entity
   ```

### QR Codes not showing in modal
- QR codes are generated by the integration
- If no QR code, a placeholder will show
- Check that event has `qr_code_data` attribute

### Booking buttons not working
- Ensure events have valid `booking_url` or `booking_url_with_params`
- Links open in new tab/window
- Check popup blockers if link doesn't open

---

## Mobile View

All cards are fully responsive:
- Events stack vertically on small screens
- Map adjusts height automatically
- Detail modal becomes fullscreen on mobile
- Touch-friendly buttons and controls

---

## Advanced Configuration

### Custom Styling

You can customize card appearance using card-mod:

```yaml
type: custom:tickets-events-map
entity: sensor.tickets_events_today
card_mod:
  style: |
    ha-card {
      --primary-color: #ff6b6b;
      --dark-primary-color: #cc5555;
    }
```

### Multiple City Views

Create separate cards for different cities:

```yaml
# Bucharest Events
- type: custom:tickets-events-card-enhanced
  entity: sensor.tickets_events_bucharest_today
  title: "Events in Bucharest"

# Paris Events
- type: custom:tickets-events-card-enhanced
  entity: sensor.tickets_events_paris_today
  title: "Events in Paris"
```

---

## Performance Tips

- Limit `max_events` to 5-10 for better performance
- Use `show_images: false` for faster loading
- Consider lower `zoom` levels for maps with many events
- Events are cached by the integration

---

## Support

- **GitHub Issues**: [Report bugs](https://github.com/mariartcom/ha-tickets-event/issues)
- **Discussions**: [Get help](https://github.com/mariartcom/ha-tickets-event/discussions)
- **Documentation**: [Full docs](https://github.com/mariartcom/ha-tickets-event)
